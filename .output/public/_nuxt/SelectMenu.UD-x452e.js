import{_ as Ie,u as Qe}from"./Button.ci36LFE2.js";import{_ as Re}from"./Avatar.p9wrY8cu.js";import{C as B,i as v,g as K,a4 as I,E as xe,G as te,H as le,D as pe,F as ye,I as ce,J as Me,a1 as q,K as Pe,_ as Ye,m as we,f as _,h as me,O as Xe,j as Ze,k as ne,a2 as _e,o as E,l as Q,w as ae,c as H,n as L,q as G,W as ie,s as Y,a as X,r as ge,b as de,t as ue,a3 as ea,v as aa,L as ta,d as Se}from"./entry.Y3rBqSuA.js";import{e as la,u as N,x as Ae,r as A,o as R,y as ke,j as Te,l as Z,f as Ve,K as Le,a as Be,H as J,T as Oe,t as ee,b as $e,m as oa,N as oe,k as De,p as na,q as Fe,O as Ee,c as k,w as ia,i as ua,n as ra,s as sa,z as da}from"./usePopper.GW3rg_qJ.js";import{u as Ce,s as va,b as pa,g as ca}from"./selectMenu.Az8ILkVo.js";import{u as ba}from"./useFormGroup.fJS8MI5O.js";import{u as fa}from"./index.4ok3QqD5.js";function he(e={},s=null,i=[]){for(let[u,a]of Object.entries(e))Ne(i,je(s,u),a);return i}function je(e,s){return e?e+"["+s+"]":s}function Ne(e,s,i){if(Array.isArray(i))for(let[u,a]of i.entries())Ne(e,je(s,u.toString()),a);else i instanceof Date?e.push([s,i.toISOString()]):typeof i=="boolean"?e.push([s,i?"1":"0"]):typeof i=="string"?e.push([s,i]):typeof i=="number"?e.push([s,`${i}`]):i==null?e.push([s,""]):he(i,s,e)}function qe(e,s,i){let u=B(i==null?void 0:i.value),a=v(()=>e.value!==void 0);return[v(()=>a.value?e.value:u.value),function(t){return a.value||(u.value=t),s==null?void 0:s(t)}]}function ma(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function ga(){return/Android/gi.test(window.navigator.userAgent)}function ya(){return ma()||ga()}function He(){let e=[],s={addEventListener(i,u,a,t){return i.addEventListener(u,a,t),s.add(()=>i.removeEventListener(u,a,t))},requestAnimationFrame(...i){let u=requestAnimationFrame(...i);s.add(()=>cancelAnimationFrame(u))},nextFrame(...i){s.requestAnimationFrame(()=>{s.requestAnimationFrame(...i)})},setTimeout(...i){let u=setTimeout(...i);s.add(()=>clearTimeout(u))},microTask(...i){let u={current:!0};return la(()=>{u.current&&i[0]()}),s.add(()=>{u.current=!1})},style(i,u,a){let t=i.style.getPropertyValue(u);return Object.assign(i.style,{[u]:a}),this.add(()=>{Object.assign(i.style,{[u]:t})})},group(i){let u=He();return i(u),this.add(()=>u.dispose())},add(i){return e.push(i),()=>{let u=e.indexOf(i);if(u>=0)for(let a of e.splice(u,1))a()}},dispose(){for(let i of e.splice(0))i()}};return s}function Oa(e,s){return e===s}var ha=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(ha||{}),Sa=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(Sa||{}),Ca=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Ca||{});let ze=Symbol("ComboboxContext");function re(e){let s=Pe(ze,null);if(s===null){let i=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,re),i}return s}let Ia=K({name:"Combobox",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>Oa},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},nullable:{type:Boolean,default:!1},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:s,attrs:i,emit:u}){let a=B(1),t=B(null),g=B(null),f=B(null),p=B(null),n=B({static:!1,hold:!1}),o=B([]),y=B(null),x=B(1),M=B(!1);function w(m=S=>S){let S=y.value!==null?o.value[y.value]:null,P=Ee(m(o.value.slice()),V=>R(V.dataRef.domRef)),h=S?P.indexOf(S):null;return h===-1&&(h=null),{options:P,activeOptionIndex:h}}let $=v(()=>e.multiple?1:0),C=v(()=>e.nullable),[l,O]=qe(v(()=>e.modelValue),m=>u("update:modelValue",m),v(()=>e.defaultValue)),r=v(()=>l.value===void 0?N($.value,{1:[],0:void 0}):l.value),c=null,b=null,d={comboboxState:a,value:r,mode:$,compare(m,S){if(typeof e.by=="string"){let P=e.by;return(m==null?void 0:m[P])===(S==null?void 0:S[P])}return e.by(m,S)},defaultValue:v(()=>e.defaultValue),nullable:C,inputRef:g,labelRef:t,buttonRef:f,optionsRef:p,disabled:v(()=>e.disabled),options:o,change(m){O(m)},activeOptionIndex:v(()=>{if(M.value&&y.value===null&&o.value.length>0){let m=o.value.findIndex(S=>!S.dataRef.disabled);m!==-1&&(y.value=m)}return y.value}),activationTrigger:x,optionsPropsRef:n,closeCombobox(){M.value=!1,!e.disabled&&a.value!==1&&(a.value=1,y.value=null)},openCombobox(){if(M.value=!0,e.disabled||a.value===0)return;let m=o.value.findIndex(S=>{let P=I(S.dataRef.value);return N($.value,{0:()=>d.compare(I(d.value.value),I(P)),1:()=>I(d.value.value).some(h=>d.compare(I(h),I(P)))})});m!==-1&&(y.value=m),a.value=0},goToOption(m,S,P){M.value=!1,c!==null&&cancelAnimationFrame(c),c=requestAnimationFrame(()=>{if(e.disabled||p.value&&!n.value.static&&a.value===1)return;let h=w();if(h.activeOptionIndex===null){let D=h.options.findIndex(W=>!W.dataRef.disabled);D!==-1&&(h.activeOptionIndex=D)}let V=Ae(m===A.Specific?{focus:A.Specific,id:S}:{focus:m},{resolveItems:()=>h.options,resolveActiveIndex:()=>h.activeOptionIndex,resolveId:D=>D.id,resolveDisabled:D=>D.dataRef.disabled});y.value=V,x.value=P??1,o.value=h.options})},selectOption(m){let S=o.value.find(h=>h.id===m);if(!S)return;let{dataRef:P}=S;O(N($.value,{0:()=>P.value,1:()=>{let h=I(d.value.value).slice(),V=I(P.value),D=h.findIndex(W=>d.compare(V,I(W)));return D===-1?h.push(V):h.splice(D,1),h}}))},selectActiveOption(){if(d.activeOptionIndex.value===null)return;let{dataRef:m,id:S}=o.value[d.activeOptionIndex.value];O(N($.value,{0:()=>m.value,1:()=>{let P=I(d.value.value).slice(),h=I(m.value),V=P.findIndex(D=>d.compare(h,I(D)));return V===-1?P.push(h):P.splice(V,1),P}})),d.goToOption(A.Specific,S)},registerOption(m,S){b&&cancelAnimationFrame(b);let P={id:m,dataRef:S},h=w(V=>(V.push(P),V));if(y.value===null){let V=S.value.value;N($.value,{0:()=>d.compare(I(d.value.value),I(V)),1:()=>I(d.value.value).some(D=>d.compare(I(D),I(V)))})&&(h.activeOptionIndex=h.options.indexOf(P))}o.value=h.options,y.value=h.activeOptionIndex,x.value=1,h.options.some(V=>!R(V.dataRef.domRef))&&(b=requestAnimationFrame(()=>{let V=w();o.value=V.options,y.value=V.activeOptionIndex}))},unregisterOption(m){var S;d.activeOptionIndex.value!==null&&((S=d.options.value[d.activeOptionIndex.value])==null?void 0:S.id)===m&&(M.value=!0);let P=w(h=>{let V=h.findIndex(D=>D.id===m);return V!==-1&&h.splice(V,1),h});o.value=P.options,y.value=P.activeOptionIndex,x.value=1}};ke([g,f,p],()=>d.closeCombobox(),v(()=>a.value===0)),xe(ze,d),Te(v(()=>N(a.value,{0:Z.Open,1:Z.Closed})));let T=v(()=>d.activeOptionIndex.value===null?null:o.value[d.activeOptionIndex.value].dataRef.value),j=v(()=>{var m;return(m=R(g))==null?void 0:m.closest("form")});return te(()=>{le([j],()=>{if(!j.value||e.defaultValue===void 0)return;function m(){d.change(e.defaultValue)}return j.value.addEventListener("reset",m),()=>{var S;(S=j.value)==null||S.removeEventListener("reset",m)}},{immediate:!0})}),()=>{let{name:m,disabled:S,form:P,...h}=e,V={open:a.value===0,disabled:S,activeIndex:d.activeOptionIndex.value,activeOption:T.value,value:r.value};return pe(ye,[...m!=null&&r.value!=null?he({[m]:r.value}).map(([D,W])=>pe(Ve,Le({features:Be.Hidden,key:D,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:P,name:D,value:W}))):[],J({theirProps:{...i,...Oe(h,["modelValue","defaultValue","nullable","multiple","onUpdate:modelValue","by"])},ourProps:{},slot:V,slots:s,attrs:i,name:"Combobox"})])}}}),Ra=K({name:"ComboboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-combobox-button-${ee()}`}},setup(e,{attrs:s,slots:i,expose:u}){let a=re("ComboboxButton");u({el:a.buttonRef,$el:a.buttonRef});function t(p){a.disabled.value||(a.comboboxState.value===0?a.closeCombobox():(p.preventDefault(),a.openCombobox()),q(()=>{var n;return(n=R(a.inputRef))==null?void 0:n.focus({preventScroll:!0})}))}function g(p){switch(p.key){case k.ArrowDown:p.preventDefault(),p.stopPropagation(),a.comboboxState.value===1&&a.openCombobox(),q(()=>{var n;return(n=a.inputRef.value)==null?void 0:n.focus({preventScroll:!0})});return;case k.ArrowUp:p.preventDefault(),p.stopPropagation(),a.comboboxState.value===1&&(a.openCombobox(),q(()=>{a.value.value||a.goToOption(A.Last)})),q(()=>{var n;return(n=a.inputRef.value)==null?void 0:n.focus({preventScroll:!0})});return;case k.Escape:if(a.comboboxState.value!==0)return;p.preventDefault(),a.optionsRef.value&&!a.optionsPropsRef.value.static&&p.stopPropagation(),a.closeCombobox(),q(()=>{var n;return(n=a.inputRef.value)==null?void 0:n.focus({preventScroll:!0})});return}}let f=$e(v(()=>({as:e.as,type:s.type})),a.buttonRef);return()=>{var p,n;let o={open:a.comboboxState.value===0,disabled:a.disabled.value,value:a.value.value},{id:y,...x}=e,M={ref:a.buttonRef,id:y,type:f.value,tabindex:"-1","aria-haspopup":"listbox","aria-controls":(p=R(a.optionsRef))==null?void 0:p.id,"aria-expanded":a.comboboxState.value===0,"aria-labelledby":a.labelRef.value?[(n=R(a.labelRef))==null?void 0:n.id,y].join(" "):void 0,disabled:a.disabled.value===!0?!0:void 0,onKeydown:g,onClick:t};return J({ourProps:M,theirProps:x,slot:o,attrs:s,slots:i,name:"ComboboxButton"})}}}),xa=K({name:"ComboboxInput",props:{as:{type:[Object,String],default:"input"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},displayValue:{type:Function},defaultValue:{type:String,default:void 0},id:{type:String,default:()=>`headlessui-combobox-input-${ee()}`}},emits:{change:e=>!0},setup(e,{emit:s,attrs:i,slots:u,expose:a}){let t=re("ComboboxInput"),g=v(()=>oa(R(t.inputRef))),f={value:!1};a({el:t.inputRef,$el:t.inputRef});function p(){t.change(null);let l=R(t.optionsRef);l&&(l.scrollTop=0),t.goToOption(A.Nothing)}let n=v(()=>{var l;let O=t.value.value;return R(t.inputRef)?typeof e.displayValue<"u"&&O!==void 0?(l=e.displayValue(O))!=null?l:"":typeof O=="string"?O:"":""});te(()=>{le([n,t.comboboxState,g],([l,O],[r,c])=>{if(f.value)return;let b=R(t.inputRef);b&&((c===0&&O===1||l!==r)&&(b.value=l),requestAnimationFrame(()=>{var d;if(f.value||!b||((d=g.value)==null?void 0:d.activeElement)!==b)return;let{selectionStart:T,selectionEnd:j}=b;Math.abs((j??0)-(T??0))===0&&T===0&&b.setSelectionRange(b.value.length,b.value.length)}))},{immediate:!0}),le([t.comboboxState],([l],[O])=>{if(l===0&&O===1){if(f.value)return;let r=R(t.inputRef);if(!r)return;let c=r.value,{selectionStart:b,selectionEnd:d,selectionDirection:T}=r;r.value="",r.value=c,T!==null?r.setSelectionRange(b,d,T):r.setSelectionRange(b,d)}})});let o=B(!1);function y(){o.value=!0}function x(){He().nextFrame(()=>{o.value=!1})}function M(l){switch(f.value=!0,l.key){case k.Enter:if(f.value=!1,t.comboboxState.value!==0||o.value)return;if(l.preventDefault(),l.stopPropagation(),t.activeOptionIndex.value===null){t.closeCombobox();return}t.selectActiveOption(),t.mode.value===0&&t.closeCombobox();break;case k.ArrowDown:return f.value=!1,l.preventDefault(),l.stopPropagation(),N(t.comboboxState.value,{0:()=>t.goToOption(A.Next),1:()=>t.openCombobox()});case k.ArrowUp:return f.value=!1,l.preventDefault(),l.stopPropagation(),N(t.comboboxState.value,{0:()=>t.goToOption(A.Previous),1:()=>{t.openCombobox(),q(()=>{t.value.value||t.goToOption(A.Last)})}});case k.Home:if(l.shiftKey)break;return f.value=!1,l.preventDefault(),l.stopPropagation(),t.goToOption(A.First);case k.PageUp:return f.value=!1,l.preventDefault(),l.stopPropagation(),t.goToOption(A.First);case k.End:if(l.shiftKey)break;return f.value=!1,l.preventDefault(),l.stopPropagation(),t.goToOption(A.Last);case k.PageDown:return f.value=!1,l.preventDefault(),l.stopPropagation(),t.goToOption(A.Last);case k.Escape:if(f.value=!1,t.comboboxState.value!==0)return;l.preventDefault(),t.optionsRef.value&&!t.optionsPropsRef.value.static&&l.stopPropagation(),t.nullable.value&&t.mode.value===0&&t.value.value===null&&p(),t.closeCombobox();break;case k.Tab:if(f.value=!1,t.comboboxState.value!==0)return;t.mode.value===0&&t.selectActiveOption(),t.closeCombobox();break}}function w(l){s("change",l),t.nullable.value&&t.mode.value===0&&l.target.value===""&&p(),t.openCombobox()}function $(){f.value=!1}let C=v(()=>{var l,O,r,c;return(c=(r=(O=e.defaultValue)!=null?O:t.defaultValue.value!==void 0?(l=e.displayValue)==null?void 0:l.call(e,t.defaultValue.value):null)!=null?r:t.defaultValue.value)!=null?c:""});return()=>{var l,O,r,c,b,d;let T={open:t.comboboxState.value===0},{id:j,displayValue:m,onChange:S,...P}=e,h={"aria-controls":(l=t.optionsRef.value)==null?void 0:l.id,"aria-expanded":t.comboboxState.value===0,"aria-activedescendant":t.activeOptionIndex.value===null||(O=t.options.value[t.activeOptionIndex.value])==null?void 0:O.id,"aria-labelledby":(b=(r=R(t.labelRef))==null?void 0:r.id)!=null?b:(c=R(t.buttonRef))==null?void 0:c.id,"aria-autocomplete":"list",id:j,onCompositionstart:y,onCompositionend:x,onKeydown:M,onInput:w,onBlur:$,role:"combobox",type:(d=i.type)!=null?d:"text",tabIndex:0,ref:t.inputRef,defaultValue:C.value,disabled:t.disabled.value===!0?!0:void 0};return J({ourProps:h,theirProps:P,slot:T,attrs:i,slots:u,features:oe.RenderStrategy|oe.Static,name:"ComboboxInput"})}}}),Ma=K({name:"ComboboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},hold:{type:[Boolean],default:!1}},setup(e,{attrs:s,slots:i,expose:u}){let a=re("ComboboxOptions"),t=`headlessui-combobox-options-${ee()}`;u({el:a.optionsRef,$el:a.optionsRef}),ce(()=>{a.optionsPropsRef.value.static=e.static}),ce(()=>{a.optionsPropsRef.value.hold=e.hold});let g=De(),f=v(()=>g!==null?(g.value&Z.Open)===Z.Open:a.comboboxState.value===0);return na({container:v(()=>R(a.optionsRef)),enabled:v(()=>a.comboboxState.value===0),accept(p){return p.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:p.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(p){p.setAttribute("role","none")}}),()=>{var p,n,o;let y={open:a.comboboxState.value===0},x={"aria-labelledby":(o=(p=R(a.labelRef))==null?void 0:p.id)!=null?o:(n=R(a.buttonRef))==null?void 0:n.id,id:t,ref:a.optionsRef,role:"listbox","aria-multiselectable":a.mode.value===1?!0:void 0},M=Oe(e,["hold"]);return J({ourProps:x,theirProps:M,slot:y,attrs:s,slots:i,features:oe.RenderStrategy|oe.Static,visible:f.value,name:"ComboboxOptions"})}}}),Pa=K({name:"ComboboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1}},setup(e,{slots:s,attrs:i,expose:u}){let a=re("ComboboxOption"),t=`headlessui-combobox-option-${ee()}`,g=B(null);u({el:g,$el:g});let f=v(()=>a.activeOptionIndex.value!==null?a.options.value[a.activeOptionIndex.value].id===t:!1),p=v(()=>N(a.mode.value,{0:()=>a.compare(I(a.value.value),I(e.value)),1:()=>I(a.value.value).some(C=>a.compare(I(C),I(e.value)))})),n=v(()=>({disabled:e.disabled,value:e.value,domRef:g}));te(()=>a.registerOption(t,n)),Me(()=>a.unregisterOption(t)),ce(()=>{a.comboboxState.value===0&&f.value&&a.activationTrigger.value!==0&&q(()=>{var C,l;return(l=(C=R(g))==null?void 0:C.scrollIntoView)==null?void 0:l.call(C,{block:"nearest"})})});function o(C){if(e.disabled)return C.preventDefault();a.selectOption(t),a.mode.value===0&&a.closeCombobox(),ya()||requestAnimationFrame(()=>{var l;return(l=R(a.inputRef))==null?void 0:l.focus()})}function y(){if(e.disabled)return a.goToOption(A.Nothing);a.goToOption(A.Specific,t)}let x=Fe();function M(C){x.update(C)}function w(C){x.wasMoved(C)&&(e.disabled||f.value||a.goToOption(A.Specific,t,0))}function $(C){x.wasMoved(C)&&(e.disabled||f.value&&(a.optionsPropsRef.value.hold||a.goToOption(A.Nothing)))}return()=>{let{disabled:C}=e,l={active:f.value,selected:p.value,disabled:C},O={id:t,ref:g,role:"option",tabIndex:C===!0?void 0:-1,"aria-disabled":C===!0?!0:void 0,"aria-selected":p.value,disabled:void 0,onClick:o,onFocus:y,onPointerenter:M,onMouseenter:M,onPointermove:w,onMousemove:w,onPointerleave:$,onMouseleave:$};return J({ourProps:O,theirProps:e,slot:l,attrs:i,slots:s,name:"ComboboxOption"})}}});function wa(e,s){return e===s}var Aa=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Aa||{}),ka=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(ka||{}),Ta=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Ta||{});function Va(e){requestAnimationFrame(()=>requestAnimationFrame(e))}let Ue=Symbol("ListboxContext");function be(e){let s=Pe(Ue,null);if(s===null){let i=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,be),i}return s}let La=K({name:"Listbox",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>wa},horizontal:{type:[Boolean],default:!1},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:s,attrs:i,emit:u}){let a=B(1),t=B(null),g=B(null),f=B(null),p=B([]),n=B(""),o=B(null),y=B(1);function x(r=c=>c){let c=o.value!==null?p.value[o.value]:null,b=Ee(r(p.value.slice()),T=>R(T.dataRef.domRef)),d=c?b.indexOf(c):null;return d===-1&&(d=null),{options:b,activeOptionIndex:d}}let M=v(()=>e.multiple?1:0),[w,$]=qe(v(()=>e.modelValue),r=>u("update:modelValue",r),v(()=>e.defaultValue)),C=v(()=>w.value===void 0?N(M.value,{1:[],0:void 0}):w.value),l={listboxState:a,value:C,mode:M,compare(r,c){if(typeof e.by=="string"){let b=e.by;return(r==null?void 0:r[b])===(c==null?void 0:c[b])}return e.by(r,c)},orientation:v(()=>e.horizontal?"horizontal":"vertical"),labelRef:t,buttonRef:g,optionsRef:f,disabled:v(()=>e.disabled),options:p,searchQuery:n,activeOptionIndex:o,activationTrigger:y,closeListbox(){e.disabled||a.value!==1&&(a.value=1,o.value=null)},openListbox(){e.disabled||a.value!==0&&(a.value=0)},goToOption(r,c,b){if(e.disabled||a.value===1)return;let d=x(),T=Ae(r===A.Specific?{focus:A.Specific,id:c}:{focus:r},{resolveItems:()=>d.options,resolveActiveIndex:()=>d.activeOptionIndex,resolveId:j=>j.id,resolveDisabled:j=>j.dataRef.disabled});n.value="",o.value=T,y.value=b??1,p.value=d.options},search(r){if(e.disabled||a.value===1)return;let c=n.value!==""?0:1;n.value+=r.toLowerCase();let b=(o.value!==null?p.value.slice(o.value+c).concat(p.value.slice(0,o.value+c)):p.value).find(T=>T.dataRef.textValue.startsWith(n.value)&&!T.dataRef.disabled),d=b?p.value.indexOf(b):-1;d===-1||d===o.value||(o.value=d,y.value=1)},clearSearch(){e.disabled||a.value!==1&&n.value!==""&&(n.value="")},registerOption(r,c){let b=x(d=>[...d,{id:r,dataRef:c}]);p.value=b.options,o.value=b.activeOptionIndex},unregisterOption(r){let c=x(b=>{let d=b.findIndex(T=>T.id===r);return d!==-1&&b.splice(d,1),b});p.value=c.options,o.value=c.activeOptionIndex,y.value=1},theirOnChange(r){e.disabled||$(r)},select(r){e.disabled||$(N(M.value,{0:()=>r,1:()=>{let c=I(l.value.value).slice(),b=I(r),d=c.findIndex(T=>l.compare(b,I(T)));return d===-1?c.push(b):c.splice(d,1),c}}))}};ke([g,f],(r,c)=>{var b;l.closeListbox(),ia(c,ua.Loose)||(r.preventDefault(),(b=R(g))==null||b.focus())},v(()=>a.value===0)),xe(Ue,l),Te(v(()=>N(a.value,{0:Z.Open,1:Z.Closed})));let O=v(()=>{var r;return(r=R(g))==null?void 0:r.closest("form")});return te(()=>{le([O],()=>{if(!O.value||e.defaultValue===void 0)return;function r(){l.theirOnChange(e.defaultValue)}return O.value.addEventListener("reset",r),()=>{var c;(c=O.value)==null||c.removeEventListener("reset",r)}},{immediate:!0})}),()=>{let{name:r,modelValue:c,disabled:b,form:d,...T}=e,j={open:a.value===0,disabled:b,value:C.value};return pe(ye,[...r!=null&&C.value!=null?he({[r]:C.value}).map(([m,S])=>pe(Ve,Le({features:Be.Hidden,key:m,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:d,name:m,value:S}))):[],J({ourProps:{},theirProps:{...i,...Oe(T,["defaultValue","onUpdate:modelValue","horizontal","multiple","by"])},slot:j,slots:s,attrs:i,name:"Listbox"})])}}}),Ba=K({name:"ListboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-listbox-button-${ee()}`}},setup(e,{attrs:s,slots:i,expose:u}){let a=be("ListboxButton");u({el:a.buttonRef,$el:a.buttonRef});function t(n){switch(n.key){case k.Space:case k.Enter:case k.ArrowDown:n.preventDefault(),a.openListbox(),q(()=>{var o;(o=R(a.optionsRef))==null||o.focus({preventScroll:!0}),a.value.value||a.goToOption(A.First)});break;case k.ArrowUp:n.preventDefault(),a.openListbox(),q(()=>{var o;(o=R(a.optionsRef))==null||o.focus({preventScroll:!0}),a.value.value||a.goToOption(A.Last)});break}}function g(n){switch(n.key){case k.Space:n.preventDefault();break}}function f(n){a.disabled.value||(a.listboxState.value===0?(a.closeListbox(),q(()=>{var o;return(o=R(a.buttonRef))==null?void 0:o.focus({preventScroll:!0})})):(n.preventDefault(),a.openListbox(),Va(()=>{var o;return(o=R(a.optionsRef))==null?void 0:o.focus({preventScroll:!0})})))}let p=$e(v(()=>({as:e.as,type:s.type})),a.buttonRef);return()=>{var n,o;let y={open:a.listboxState.value===0,disabled:a.disabled.value,value:a.value.value},{id:x,...M}=e,w={ref:a.buttonRef,id:x,type:p.value,"aria-haspopup":"listbox","aria-controls":(n=R(a.optionsRef))==null?void 0:n.id,"aria-expanded":a.listboxState.value===0,"aria-labelledby":a.labelRef.value?[(o=R(a.labelRef))==null?void 0:o.id,x].join(" "):void 0,disabled:a.disabled.value===!0?!0:void 0,onKeydown:t,onKeyup:g,onClick:f};return J({ourProps:w,theirProps:M,slot:y,attrs:s,slots:i,name:"ListboxButton"})}}}),$a=K({name:"ListboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-listbox-options-${ee()}`}},setup(e,{attrs:s,slots:i,expose:u}){let a=be("ListboxOptions"),t=B(null);u({el:a.optionsRef,$el:a.optionsRef});function g(n){switch(t.value&&clearTimeout(t.value),n.key){case k.Space:if(a.searchQuery.value!=="")return n.preventDefault(),n.stopPropagation(),a.search(n.key);case k.Enter:if(n.preventDefault(),n.stopPropagation(),a.activeOptionIndex.value!==null){let o=a.options.value[a.activeOptionIndex.value];a.select(o.dataRef.value)}a.mode.value===0&&(a.closeListbox(),q(()=>{var o;return(o=R(a.buttonRef))==null?void 0:o.focus({preventScroll:!0})}));break;case N(a.orientation.value,{vertical:k.ArrowDown,horizontal:k.ArrowRight}):return n.preventDefault(),n.stopPropagation(),a.goToOption(A.Next);case N(a.orientation.value,{vertical:k.ArrowUp,horizontal:k.ArrowLeft}):return n.preventDefault(),n.stopPropagation(),a.goToOption(A.Previous);case k.Home:case k.PageUp:return n.preventDefault(),n.stopPropagation(),a.goToOption(A.First);case k.End:case k.PageDown:return n.preventDefault(),n.stopPropagation(),a.goToOption(A.Last);case k.Escape:n.preventDefault(),n.stopPropagation(),a.closeListbox(),q(()=>{var o;return(o=R(a.buttonRef))==null?void 0:o.focus({preventScroll:!0})});break;case k.Tab:n.preventDefault(),n.stopPropagation();break;default:n.key.length===1&&(a.search(n.key),t.value=setTimeout(()=>a.clearSearch(),350));break}}let f=De(),p=v(()=>f!==null?(f.value&Z.Open)===Z.Open:a.listboxState.value===0);return()=>{var n,o,y,x;let M={open:a.listboxState.value===0},{id:w,...$}=e,C={"aria-activedescendant":a.activeOptionIndex.value===null||(n=a.options.value[a.activeOptionIndex.value])==null?void 0:n.id,"aria-multiselectable":a.mode.value===1?!0:void 0,"aria-labelledby":(x=(o=R(a.labelRef))==null?void 0:o.id)!=null?x:(y=R(a.buttonRef))==null?void 0:y.id,"aria-orientation":a.orientation.value,id:w,onKeydown:g,role:"listbox",tabIndex:0,ref:a.optionsRef};return J({ourProps:C,theirProps:$,slot:M,attrs:s,slots:i,features:oe.RenderStrategy|oe.Static,visible:p.value,name:"ListboxOptions"})}}}),Da=K({name:"ListboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-listbox.option-${ee()}`}},setup(e,{slots:s,attrs:i,expose:u}){let a=be("ListboxOption"),t=B(null);u({el:t,$el:t});let g=v(()=>a.activeOptionIndex.value!==null?a.options.value[a.activeOptionIndex.value].id===e.id:!1),f=v(()=>N(a.mode.value,{0:()=>a.compare(I(a.value.value),I(e.value)),1:()=>I(a.value.value).some(l=>a.compare(I(l),I(e.value)))})),p=v(()=>N(a.mode.value,{1:()=>{var l;let O=I(a.value.value);return((l=a.options.value.find(r=>O.some(c=>a.compare(I(c),I(r.dataRef.value)))))==null?void 0:l.id)===e.id},0:()=>f.value})),n=ra(t),o=v(()=>({disabled:e.disabled,value:e.value,get textValue(){return n()},domRef:t}));te(()=>a.registerOption(e.id,o)),Me(()=>a.unregisterOption(e.id)),te(()=>{le([a.listboxState,f],()=>{a.listboxState.value===0&&f.value&&N(a.mode.value,{1:()=>{p.value&&a.goToOption(A.Specific,e.id)},0:()=>{a.goToOption(A.Specific,e.id)}})},{immediate:!0})}),ce(()=>{a.listboxState.value===0&&g.value&&a.activationTrigger.value!==0&&q(()=>{var l,O;return(O=(l=R(t))==null?void 0:l.scrollIntoView)==null?void 0:O.call(l,{block:"nearest"})})});function y(l){if(e.disabled)return l.preventDefault();a.select(e.value),a.mode.value===0&&(a.closeListbox(),q(()=>{var O;return(O=R(a.buttonRef))==null?void 0:O.focus({preventScroll:!0})}))}function x(){if(e.disabled)return a.goToOption(A.Nothing);a.goToOption(A.Specific,e.id)}let M=Fe();function w(l){M.update(l)}function $(l){M.wasMoved(l)&&(e.disabled||g.value||a.goToOption(A.Specific,e.id,0))}function C(l){M.wasMoved(l)&&(e.disabled||g.value&&a.goToOption(A.Nothing))}return()=>{let{disabled:l}=e,O={active:g.value,selected:f.value,disabled:l},{id:r,value:c,disabled:b,...d}=e,T={id:r,ref:t,role:"option",tabIndex:l===!0?void 0:-1,"aria-disabled":l===!0?!0:void 0,"aria-selected":f.value,disabled:void 0,onClick:y,onFocus:x,onPointerenter:w,onMouseenter:w,onPointermove:$,onMousemove:$,onPointerleave:C,onMouseleave:C};return J({ourProps:T,theirProps:d,slot:O,attrs:i,slots:s,name:"ListboxOption"})}}});const U=we(_.ui.strategy,_.ui.select,va),ve=we(_.ui.strategy,_.ui.selectMenu,pa),Fa=K({components:{HCombobox:Ia,HComboboxButton:Ra,HComboboxOptions:Ma,HComboboxOption:Pa,HComboboxInput:xa,HListbox:La,HListboxButton:Ba,HListboxOptions:$a,HListboxOption:Da,UIcon:Ie,UAvatar:Re},inheritAttrs:!1,props:{modelValue:{type:[String,Number,Object,Array],default:""},query:{type:String,default:null},by:{type:String,default:void 0},options:{type:Array,default:()=>[]},id:{type:String,default:null},name:{type:String,default:null},required:{type:Boolean,default:!1},icon:{type:String,default:null},loadingIcon:{type:String,default:()=>U.default.loadingIcon},leadingIcon:{type:String,default:null},trailingIcon:{type:String,default:()=>U.default.trailingIcon},trailing:{type:Boolean,default:!1},leading:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},selectedIcon:{type:String,default:()=>ve.default.selectedIcon},disabled:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},searchable:{type:[Boolean,Function],default:!1},searchablePlaceholder:{type:String,default:"Search..."},clearSearchOnClose:{type:Boolean,default:()=>ve.default.clearSearchOnClose},debounce:{type:Number,default:200},creatable:{type:Boolean,default:!1},showCreateOptionWhen:{type:String,default:()=>ve.default.showCreateOptionWhen},placeholder:{type:String,default:null},padded:{type:Boolean,default:!0},size:{type:String,default:null,validator(e){return Object.keys(U.size).includes(e)}},color:{type:String,default:()=>U.default.color,validator(e){return[..._.ui.colors,...Object.keys(U.color)].includes(e)}},variant:{type:String,default:()=>U.default.variant,validator(e){return[...Object.keys(U.variant),...Object.values(U.color).flatMap(s=>Object.keys(s))].includes(e)}},optionAttribute:{type:String,default:"label"},valueAttribute:{type:String,default:null},searchAttributes:{type:Array,default:null},popper:{type:Object,default:()=>({})},selectClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},uiMenu:{type:Object,default:()=>({})}},emits:["update:modelValue","update:query","open","close","change"],setup(e,{emit:s,slots:i}){const{ui:u,attrs:a}=Ce("select",me(e,"ui"),U,me(e,"class")),{ui:t}=Ce("selectMenu",me(e,"uiMenu"),ve),g=v(()=>Xe({},e.popper,t.value.popper)),[f,p]=sa(g.value),{size:n,rounded:o}=Qe({ui:u,props:e}),{emitFormBlur:y,emitFormChange:x,inputId:M,color:w,size:$,name:C}=ba(e,U),l=v(()=>n.value||$.value),O=B(""),r=v({get(){return e.query??O.value},set(F){O.value=F,s("update:query",F)}}),c=v(()=>{if(e.multiple)return Array.isArray(e.modelValue)&&e.modelValue.length?`${e.modelValue.length} selected`:null;if(e.valueAttribute){const F=e.options.find(z=>z[e.valueAttribute]===e.modelValue);return F?F[e.optionAttribute]:null}else return["string","number"].includes(typeof e.modelValue)?e.modelValue:e.modelValue[e.optionAttribute]}),b=v(()=>{var z,se;const F=((se=(z=u.value.color)==null?void 0:z[w.value])==null?void 0:se[e.variant])||u.value.variant[e.variant];return Ze(ne(u.value.base,t.value.select,o.value,u.value.size[l.value],u.value.gap[l.value],e.padded?u.value.padding[l.value]:"p-0",F==null?void 0:F.replaceAll("{color}",w.value),(d.value||i.leading)&&u.value.leading.padding[l.value],(T.value||i.trailing)&&u.value.trailing.padding[l.value]),e.placeholder&&!e.modelValue&&u.value.placeholder,e.selectClass)}),d=v(()=>e.icon&&e.leading||e.icon&&!e.trailing||e.loading&&!e.trailing||e.leadingIcon),T=v(()=>e.icon&&e.trailing||e.loading&&e.trailing||e.trailingIcon),j=v(()=>e.loading?e.loadingIcon:e.leadingIcon||e.icon),m=v(()=>e.loading&&!d.value?e.loadingIcon:e.trailingIcon||e.icon),S=v(()=>ne(u.value.icon.leading.wrapper,u.value.icon.leading.pointer,u.value.icon.leading.padding[l.value])),P=v(()=>ne(u.value.icon.base,w.value&&_.ui.colors.includes(w.value)&&u.value.icon.color.replaceAll("{color}",w.value),u.value.icon.size[l.value],e.loading&&u.value.icon.loading)),h=v(()=>ne(u.value.icon.trailing.wrapper,u.value.icon.trailing.pointer,u.value.icon.trailing.padding[l.value])),V=v(()=>ne(u.value.icon.base,w.value&&_.ui.colors.includes(w.value)&&u.value.icon.color.replaceAll("{color}",w.value),u.value.icon.size[l.value],e.loading&&!d.value&&u.value.icon.loading)),D=typeof e.searchable=="function"?fa(e.searchable,e.debounce):void 0,W=da(async()=>e.searchable&&D?await D(r.value):r.value===""?e.options:e.options.filter(F=>{var z;return((z=e.searchAttributes)!=null&&z.length?e.searchAttributes:[e.optionAttribute]).some(se=>{if(["string","number"].includes(typeof F))return String(F).search(new RegExp(r.value,"i"))!==-1;const fe=ca(F,se);return fe!=null&&String(fe).search(new RegExp(r.value,"i"))!==-1})})),Ke=v(()=>r.value===""||e.showCreateOptionWhen==="empty"&&W.value.length||e.showCreateOptionWhen==="always"&&W.value.find(z=>["string","number"].includes(typeof z)?z===r.value:z[e.optionAttribute]===r.value)?null:["string","number"].includes(typeof e.modelValue)?r.value:{[e.optionAttribute]:r.value});function We(){e.clearSearchOnClose&&(r.value="")}le(p,F=>{F?s("open"):(We(),s("close"),y())});function Ge(F){s("update:modelValue",F),s("change",F),x()}function Je(F){r.value=F.target.value}return{ui:u,uiMenu:t,attrs:a,name:C,inputId:M,popper:g,trigger:f,container:p,label:c,isLeading:d,isTrailing:T,selectClass:b,leadingIconName:j,leadingIconClass:P,leadingWrapperIconClass:S,trailingIconName:m,trailingIconClass:V,trailingWrapperIconClass:h,filteredOptions:W,createOption:Ke,query:r,onUpdate:Ge,onChange:Je}}}),Ea=["value","required"],ja=["id","disabled"],Na={class:"truncate"};function qa(e,s,i,u,a,t){const g=Ie,f=_e("HComboboxInput"),p=Re;return E(),Q(ie(e.searchable?"HCombobox":"HListbox"),{by:e.by,name:e.name,"model-value":e.modelValue,multiple:e.multiple,disabled:e.disabled,as:"div",class:L(e.ui.wrapper),"onUpdate:modelValue":e.onUpdate},{default:ae(({open:n})=>[e.required?(E(),H("input",{key:0,value:e.modelValue,required:e.required,class:L(e.uiMenu.required),tabindex:"-1","aria-hidden":"true"},null,10,Ea)):G("",!0),(E(),Q(ie(e.searchable?"HComboboxButton":"HListboxButton"),{ref:"trigger",as:"div",role:"button",class:L(e.uiMenu.trigger)},{default:ae(()=>[Y(e.$slots,"default",{open:n,disabled:e.disabled,loading:e.loading},()=>[X("button",ge({id:e.inputId,class:e.selectClass,disabled:e.disabled,type:"button"},e.attrs),[e.isLeading&&e.leadingIconName||e.$slots.leading?(E(),H("span",{key:0,class:L(e.leadingWrapperIconClass)},[Y(e.$slots,"leading",{disabled:e.disabled,loading:e.loading},()=>[de(g,{name:e.leadingIconName,class:L(e.leadingIconClass)},null,8,["name","class"])])],2)):G("",!0),Y(e.$slots,"label",{},()=>[e.label?(E(),H("span",{key:0,class:L(e.uiMenu.label)},ue(e.label),3)):(E(),H("span",{key:1,class:L(e.uiMenu.label)},ue(e.placeholder||"Â "),3))]),e.isTrailing&&e.trailingIconName||e.$slots.trailing?(E(),H("span",{key:1,class:L(e.trailingWrapperIconClass)},[Y(e.$slots,"trailing",{disabled:e.disabled,loading:e.loading},()=>[de(g,{name:e.trailingIconName,class:L(e.trailingIconClass),"aria-hidden":"true"},null,8,["name","class"])])],2)):G("",!0)],16,ja)])]),_:2},1032,["class"])),n?(E(),H("div",{key:1,ref:"container",class:L([e.uiMenu.container,e.uiMenu.width])},[de(ea,ge({appear:""},e.uiMenu.transition),{default:ae(()=>[X("div",null,[e.popper.arrow?(E(),H("div",{key:0,"data-popper-arrow":"",class:L(Object.values(e.uiMenu.arrow))},null,2)):G("",!0),(E(),Q(ie(e.searchable?"HComboboxOptions":"HListboxOptions"),{static:"",class:L([e.uiMenu.base,e.uiMenu.ring,e.uiMenu.rounded,e.uiMenu.shadow,e.uiMenu.background,e.uiMenu.padding,e.uiMenu.height])},{default:ae(()=>[e.searchable?(E(),Q(f,{key:0,"display-value":()=>e.query,name:"q",placeholder:e.searchablePlaceholder,autofocus:"",autocomplete:"off",class:L(e.uiMenu.input),onChange:e.onChange},null,8,["display-value","placeholder","class","onChange"])):G("",!0),(E(!0),H(ye,null,aa(e.filteredOptions,(o,y)=>(E(),Q(ie(e.searchable?"HComboboxOption":"HListboxOption"),{key:y,as:"template",value:e.valueAttribute?o[e.valueAttribute]:o,disabled:o.disabled},{default:ae(({active:x,selected:M,disabled:w})=>[X("li",{class:L([e.uiMenu.option.base,e.uiMenu.option.rounded,e.uiMenu.option.padding,e.uiMenu.option.size,e.uiMenu.option.color,x?e.uiMenu.option.active:e.uiMenu.option.inactive,M&&e.uiMenu.option.selected,w&&e.uiMenu.option.disabled])},[X("div",{class:L(e.uiMenu.option.container)},[Y(e.$slots,"option",{option:o,active:x,selected:M},()=>[o.icon?(E(),Q(g,{key:0,name:o.icon,class:L([e.uiMenu.option.icon.base,x?e.uiMenu.option.icon.active:e.uiMenu.option.icon.inactive,o.iconClass]),"aria-hidden":"true"},null,8,["name","class"])):o.avatar?(E(),Q(p,ge({key:1},{size:e.uiMenu.option.avatar.size,...o.avatar},{class:e.uiMenu.option.avatar.base,"aria-hidden":"true"}),null,16,["class"])):o.chip?(E(),H("span",{key:2,class:L(e.uiMenu.option.chip.base),style:ta({background:`#${o.chip}`})},null,6)):G("",!0),X("span",Na,ue(["string","number"].includes(typeof o)?o:o[e.optionAttribute]),1)])],2),M?(E(),H("span",{key:0,class:L([e.uiMenu.option.selectedIcon.wrapper,e.uiMenu.option.selectedIcon.padding])},[de(g,{name:e.selectedIcon,class:L(e.uiMenu.option.selectedIcon.base),"aria-hidden":"true"},null,8,["name","class"])],2)):G("",!0)],2)]),_:2},1032,["value","disabled"]))),128)),e.creatable&&e.createOption?(E(),Q(ie(e.searchable?"HComboboxOption":"HListboxOption"),{key:1,value:e.createOption,as:"template"},{default:ae(({active:o,selected:y})=>[X("li",{class:L([e.uiMenu.option.base,e.uiMenu.option.rounded,e.uiMenu.option.padding,e.uiMenu.option.size,e.uiMenu.option.color,o?e.uiMenu.option.active:e.uiMenu.option.inactive])},[X("div",{class:L(e.uiMenu.option.container)},[Y(e.$slots,"option-create",{option:e.createOption,active:o,selected:y},()=>[X("span",{class:L(e.uiMenu.option.create)},'Create "'+ue(e.createOption[e.optionAttribute])+'"',3)])],2)],2)]),_:3},8,["value"])):e.searchable&&e.query&&!e.filteredOptions.length?(E(),H("p",{key:2,class:L(e.uiMenu.option.empty)},[Y(e.$slots,"option-empty",{query:e.query},()=>[Se(' No results for "'+ue(e.query)+'". ',1)])],2)):e.filteredOptions.length?G("",!0):(E(),H("p",{key:3,class:L(e.uiMenu.empty)},[Y(e.$slots,"empty",{query:e.query},()=>[Se(" No options. ")])],2))]),_:3},8,["class"]))])]),_:3},16)],2)):G("",!0)]),_:3},8,["by","name","model-value","multiple","disabled","class","onUpdate:modelValue"])}const Qa=Ye(Fa,[["render",qa]]);export{Qa as _};
