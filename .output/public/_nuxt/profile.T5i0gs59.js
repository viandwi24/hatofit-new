import{u as U,_ as N,a as S}from"./FormGroup.1WsM2zv8.js";import{_ as O}from"./SelectMenu.UD-x452e.js";import{_ as B,g as V,G as j,J as $,C as g,E as b,o as E,c as P,s as C,x as J,b as o,w as u,a as f,B as i}from"./entry.Y3rBqSuA.js";import{h as A}from"./usePopper.GW3rg_qJ.js";import{a as F}from"./Button.ci36LFE2.js";import{_ as G}from"./Card.IAcD9L8n.js";import"./selectMenu.Az8ILkVo.js";import"./useFormGroup.fJS8MI5O.js";import"./index.4ok3QqD5.js";import"./Avatar.p9wrY8cu.js";import"./Icon.qG8AuYyo.js";import"./index.0wqzsba0.js";import"./nuxt-link.BE_URmh-.js";class x extends Error{constructor(s){super(s),this.message=s,Object.setPrototypeOf(this,x.prototype)}}const Y=V({props:{schema:{type:Object,default:void 0},state:{type:Object,required:!0},validate:{type:Function,default:()=>[]},validateOn:{type:Array,default:()=>["blur","input","change","submit"]}},emits:["submit","error"],setup(e,{expose:s,emit:r}){const d=U("$Z55GngiEgp"),n=A(`form-${d}`);j(()=>{n.on(async t=>{var a;t.type!=="submit"&&((a=e.validateOn)!=null&&a.includes(t.type))&&await p(t.path,{silent:!0})})}),$(()=>{n.reset()});const l=g([]);b("form-errors",l),b("form-events",n);const m=g({});b("form-inputs",m);async function v(){let t=await e.validate(e.state);if(e.schema)if(Z(e.schema))t=t.concat(await D(e.state,e.schema));else if(k(e.schema))t=t.concat(await M(e.state,e.schema));else if(q(e.schema))t=t.concat(await L(e.state,e.schema));else if(W(e.schema))t=t.concat(await z(e.state,e.schema));else throw new Error("Form validation failed: Unsupported form schema");return t}async function p(t,a={silent:!1}){let c=t;if(t&&!Array.isArray(t)&&(c=[t]),c){const h=l.value.filter(w=>!c.includes(w.path)),y=(await v()).filter(w=>c.includes(w.path));l.value=h.concat(y)}else l.value=await v();if(!a.silent&&l.value.length>0)throw new x(`Form validation failed: ${JSON.stringify(l.value,null,2)}`);return e.state}async function _(t){var c;const a=t;try{(c=e.validateOn)!=null&&c.includes("submit")&&await p();const h={...a,data:e.state};r("submit",h)}catch(h){if(!(h instanceof x))throw h;const y={...a,errors:l.value.map(w=>({...w,id:m.value[w.path]}))};r("error",y)}}return s({validate:p,errors:l,setErrors(t,a){l.value=t,a?l.value=l.value.filter(c=>c.path!==a).concat(t):l.value=t},async submit(){await _(new Event("submit"))},getErrors(t){return t?l.value.filter(a=>a.path===t):l.value},clear(t){t?l.value=l.value.filter(a=>a.path!==t):l.value=[]}}),{onSubmit:_}}});function k(e){return e.validate&&e.__isYupSchema__}function I(e){return e.inner!==void 0}async function M(e,s){try{return await s.validate(e,{abortEarly:!1}),[]}catch(r){if(I(r))return r.inner.map(d=>({path:d.path??"",message:d.message}));throw r}}function Z(e){return e.parse!==void 0}async function D(e,s){const r=await s.safeParseAsync(e);return r.success===!1?r.error.issues.map(d=>({path:d.path.join("."),message:d.message})):[]}function q(e){return e.validateAsync!==void 0&&e.id!==void 0}function H(e){return e.isJoi===!0}async function L(e,s){try{return await s.validateAsync(e,{abortEarly:!1}),[]}catch(r){if(H(r))return r.details.map(d=>({path:d.path.join("."),message:d.message}));throw r}}function W(e){return e._parse!==void 0}async function z(e,s){const r=await s._parse(e);return r.issues?r.issues.map(d=>{var n;return{path:((n=d.path)==null?void 0:n.map(l=>l.key).join("."))||"",message:d.message}}):[]}function K(e,s,r,d,n,l){return E(),P("form",{onSubmit:s[0]||(s[0]=J((...m)=>e.onSubmit&&e.onSubmit(...m),["prevent"]))},[C(e.$slots,"default")],32)}const Q=B(Y,[["render",K]]),R={class:"flex flex-col gap-4"},T=f("h2",{class:"text-xl font-semibold"},"Profile",-1),X={class:"flex gap-4 flex-1 w-full"},ee={class:"flex gap-4 flex-1 w-full"},te={class:"flex gap-4 flex-1 w-full"},ae={class:"flex justify-end"},se={class:"flex gap-4"},le={class:"flex-1"},oe=f("h2",{class:"text-xl font-semibold"},"Change Email",-1),ne={class:"flex justify-end"},re=f("h2",{class:"text-xl font-semibold"},"Change Password",-1),ie={class:"flex justify-end"},be=V({__name:"profile",setup(e){const s=g({firstName:"John",lastName:"Doe",email:"john.doe@mail.com",dateOfBirth:"",weight:70,height:50,gender:"male"}),r=g({oldPassword:"",newPassword:"",confirmPassword:""});return(d,n)=>{const l=N,m=S,v=O,p=Q,_=F,t=G;return E(),P("div",R,[o(t,null,{header:u(()=>[T]),footer:u(()=>[f("div",ae,[o(_,{variant:"solid",color:"primary",label:"Save"})])]),default:u(()=>[o(p,{state:i(s),class:"flex flex-col gap-4"},{default:u(()=>[f("div",X,[o(m,{label:"First Name",name:"firstName",class:"flex-1"},{default:u(()=>[o(l,{modelValue:i(s).firstName,"onUpdate:modelValue":n[0]||(n[0]=a=>i(s).firstName=a)},null,8,["modelValue"])]),_:1}),o(m,{label:"Last Name",name:"lastName",class:"flex-1"},{default:u(()=>[o(l,{modelValue:i(s).lastName,"onUpdate:modelValue":n[1]||(n[1]=a=>i(s).lastName=a)},null,8,["modelValue"])]),_:1})]),f("div",ee,[o(m,{label:"Date of Birth",name:"dateOfBirth",class:"flex-1"},{default:u(()=>[o(l,{type:"date",modelValue:i(s).dateOfBirth,"onUpdate:modelValue":n[2]||(n[2]=a=>i(s).dateOfBirth=a)},null,8,["modelValue"])]),_:1}),o(m,{label:"Gender",name:"gender",class:"flex-1"},{default:u(()=>[o(v,{modelValue:i(s).gender,"onUpdate:modelValue":n[3]||(n[3]=a=>i(s).gender=a),options:["male","female"]},null,8,["modelValue"])]),_:1})]),f("div",te,[o(m,{label:"Weight",name:"weight",class:"flex-1"},{default:u(()=>[o(l,{type:"number",modelValue:i(s).weight,"onUpdate:modelValue":n[4]||(n[4]=a=>i(s).weight=a)},null,8,["modelValue"])]),_:1}),o(m,{label:"Height",name:"height",class:"flex-1"},{default:u(()=>[o(l,{type:"number",modelValue:i(s).height,"onUpdate:modelValue":n[5]||(n[5]=a=>i(s).height=a)},null,8,["modelValue"])]),_:1})])]),_:1},8,["state"])]),_:1}),f("div",se,[f("div",le,[o(t,{class:""},{header:u(()=>[oe]),footer:u(()=>[f("div",ne,[o(_,{variant:"solid",color:"primary",label:"Change Email"})])]),default:u(()=>[o(p,{state:i(s),class:"flex flex-col gap-4"},{default:u(()=>[o(m,{label:"Email",name:"email"},{default:u(()=>[o(l,{modelValue:i(s).email,"onUpdate:modelValue":n[6]||(n[6]=a=>i(s).email=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["state"])]),_:1})]),o(t,{class:"flex-1"},{header:u(()=>[re]),footer:u(()=>[f("div",ie,[o(_,{variant:"solid",color:"primary",label:"Change Email"})])]),default:u(()=>[o(p,{state:i(r),class:"flex flex-col gap-4"},{default:u(()=>[o(m,{label:"Old Password",name:"oldPassword"},{default:u(()=>[o(l,{type:"password",modelValue:i(r).oldPassword,"onUpdate:modelValue":n[7]||(n[7]=a=>i(r).oldPassword=a)},null,8,["modelValue"])]),_:1}),o(m,{label:"New Password",name:"newPassword"},{default:u(()=>[o(l,{type:"password",modelValue:i(r).newPassword,"onUpdate:modelValue":n[8]||(n[8]=a=>i(r).newPassword=a)},null,8,["modelValue"])]),_:1}),o(m,{label:"Confirm Password",name:"confirmPassword"},{default:u(()=>[o(l,{type:"password",modelValue:i(r).confirmPassword,"onUpdate:modelValue":n[9]||(n[9]=a=>i(r).confirmPassword=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["state"])]),_:1})])])}}});export{be as default};
